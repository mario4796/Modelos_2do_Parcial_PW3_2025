@model Gestion_de_Reservas.web.Models.ReservaViewModel
@using Gestion_de_Reservas.Data.EF
@{
}

<h2 class="mb-4">Agregar Nueva Reserva</h2>

@* Mostrar errores del servidor *@
@Html.ValidationSummary(true, "", new { @class = "text-danger mb-3" })

<form method="post" asp-action="Agregar" class="row g-3">
    @Html.AntiForgeryToken()

    <div class="col-md-3">
        <label for="CantidadPasajeros" class="form-label">Cantidad de Pasajeros</label>
        <input type="number" class="form-control" id="CantidadPasajeros" name="CantidadPasajeros" min="1" required placeholder="1" />
        <small class="text-muted">Ingresa la cantidad de pasajeros.</small>
    </div>

    <div class="col-md-4">
        <label for="FechaInicio" class="form-label">Fecha de Inicio del Viaje</label>
        <input type="date" class="form-control" id="FechaInicio" name="FechaInicio" required />
    </div>

    <div class="col-md-4">
        <label for="FechaFin" class="form-label">Fecha de Fin del Viaje</label>
        <input type="date" class="form-control" id="FechaFin" name="FechaFin" required />
    </div>

    <div class="col-md-6">
        <label for="IdDestino" class="form-label">Destino</label>
        <select class="form-select" id="IdDestino" name="IdDestino" required>
            <option value="" disabled selected>Seleccione un destino</option>
            @foreach (var destino in (List<Destino>)ViewBag.destinos)
            {
                @if (ViewBag.EscuderiaSeleccionada == destino.IdDestino)
                {
                    <option selected value="@destino.IdDestino">@destino.Nombre</option>
                }
                else
                {
                    <option value="@destino.IdDestino">@destino.Nombre</option>
                }
            }
        </select>
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-primary">Registrar Reserva</button>
        <a asp-action="Visualizar" class="btn btn-link">Ver reservas</a>
    </div>
</form>

@section Scripts {
    @* Habilita validación cliente si tienes la partial *@
    @await Html.PartialAsync("_ValidationScriptsPartial")
}
