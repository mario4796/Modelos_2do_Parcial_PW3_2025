﻿@using Gestion_Pilotos_Escuderias_2024.Data.EF
@model List<Piloto>

<h1>Pilotos de F1</h1>

<form method="get" action="ListarPilotos">
    <div class="form-group">
        <label for="IdEscuderia">Escuderia</label>
        <select class="form-control" id="IdEscuderia" name="IdEscuderia">
            <option value="">Seleccione una escuderia</option>
            @foreach (var escuderia in (List<Escuderium>)ViewBag.Escuderias)
            {
                @if (ViewBag.EscuderiaSeleccionada == escuderia.IdEscuderia)
                {
                    <option selected value="@escuderia.IdEscuderia">@escuderia.NombreEscuderia</option>
                }
                else
                {
                    <option value="@escuderia.IdEscuderia">@escuderia.NombreEscuderia</option>
                }
            }
        </select>
    </div>
    <input type="submit" class="btn btn-primary" value="Filtrar" />
</form>

<table class="table">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Escuderia</th>
            <th>Operacion</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var piloto in Model)
        {
            <tr>
                <td>@piloto.NombrePiloto</td>
                <td>@piloto.IdEscuderiaNavigation.NombreEscuderia</td>
                <td><a href="/Piloto/EliminarPiloto/@piloto.IdPiloto">Eliminar</a></td>
            </tr>
        }
    </tbody>

</table>